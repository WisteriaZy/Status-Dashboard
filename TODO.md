# TODO – Local Device Status Dashboard

> 原则：先跑起来 → 再变好看 → 再变聪明
> 所有功能都允许"简陋但可用"的第一版

---

## 阶段 0：基础结构（必须先完成）

- [x] 初始化本地后端（Python + FastAPI）
- [x] 初始化前端（单页 Web）
- [x] 实现标签页切换（不依赖前端框架）
- [x] 定义统一的数据接口结构（JSON）
- [x] 2FA 认证（TOTP）
- [x] 配置文件系统（config.yaml）

标签页规划：
- 当前
- 任务列表
- 数据可视化

---

## 阶段 1：当前（状态面板）

### 1.1 当前应用与窗口

- [x] 获取当前活动窗口（标题 + 进程名）
- [x] 建立「进程名 → 易读名称」映射表（可配置）
- [x] 前端展示：
  - 当前应用名称
  - 当前窗口标题
  - 应用图标（可选）

---

### 1.2 应用专属信息小面板（按需）

- [ ] 设计"应用插件"机制（按进程名匹配）
- [ ] osu!：
  - [ ] 若 osu! 处于活动状态，显示游戏相关信息
- [ ] 浏览器：
  - [ ] 尝试获取当前标签页信息（若可行）
- [x] 音乐播放器：
  - [x] 显示当前播放的媒体信息（SMTC）

> 允许第一版只支持 1 个应用

---

### 1.3 使用时间统计

- [x] 每 5 秒采样活动窗口
- [x] 本地 JSON 存储累计使用时长
- [x] 前端显示：
  - [x] 今日各应用使用时间列表
  - [x] 当前应用已使用时间
  - [x] 打开的应用按使用时间排序

---

### 1.4 设备信息采集（周期性）

- [x] CPU 使用率
- [ ] GPU 使用率（若可获取）
- [x] 内存使用情况
- [x] 磁盘使用情况
- [x] 设备已启动时间（uptime）
- [ ] 设置采集周期（如 30s / 60s）

---

### 1.5 截图与外部工具

- [x] 获取设备全屏截图（按钮触发）
- [x] 前端显示最近截图
- [ ] 提供 Screego 链接入口（不做集成）

---

### 1.6 移动设备状态

- [x] 接收手机状态推送（AutoX.js）
- [x] 显示设备名称、当前应用
- [x] 显示电量、充电状态
- [x] 设备在线/离线检测

---

## 阶段 2：任务列表（本地 TODO）

### 2.1 本地 TODO 系统

- [x] 本地存储（JSON 文件）
- [x] 获取任务列表
- [x] 前端展示任务
- [x] 支持完成 / 删除 / 添加任务
- [x] 支持重要标记
- [x] 支持子任务

---

### 2.2 提醒系统

- [x] 支持多种提醒类型：
  - [x] 一次性提醒（once）
  - [x] 每天提醒（daily）
  - [x] 每周提醒（weekly）
  - [x] 每月提醒（monthly）
- [x] Windows 系统通知
- [x] QQ 私聊/群消息通知（NapCat）
- [x] 提醒目标 tag 映射（私人/公共）

---

### 2.3 MCP Server 集成

- [x] 独立虚拟环境运行
- [x] Streamable HTTP 传输（stateless）
- [x] MCP Tools：
  - [x] list_tasks - 列出任务
  - [x] add_task - 创建任务
  - [x] complete_task - 完成任务
  - [x] delete_task - 删除任务
  - [x] update_task - 更新任务
- [x] AstrBot 对接

---

~~### 2.4 特殊命名任务 → 数据记录（排除）~~

- [ ] 设计"特殊任务命名规则"
  - 例：`[ss]`
- [ ] 后端监听任务变化
- [ ] 若检测到特殊任务：
  - [ ] 在对应数据表中新增一条记录
  - [ ] 自动删除该 Todo
- [ ] 规则可扩展（不写死）

> 第一版只支持 1 种特殊规则即可

---

## 阶段 3：数据可视化

### 3.1 本地数据展示

- [x] 单日使用时间柱状图
- [x] 周视图（最近 7 天使用趋势）
- [x] 月视图（最近 30 天使用趋势）
- [x] 应用详情弹窗（热力图 30 天）
- [x] 支持时间维度切换：日 / 周 / 月
- [x] 应用专属颜色（基于进程名 hash）
- [ ] 不同数据类型使用不同图表

---

### 3.2 外部 SQLite 数据导入

- [ ] 提供"导入 SQLite 文件"按钮
- [ ] 解析手机端用时统计数据
- [ ] 映射字段并整合到本地数据
- [ ] 允许覆盖 / 合并策略选择

---

## 阶段 4：体验优化（后做）

- [ ] 手机端布局适配
- [ ] 深色模式
- [ ] 面板性能优化
- [ ] 插件机制文档化
- [x] PWA 支持（可安装、离线缓存）

---

## 已放弃

- ~~Google Tasks 接入~~（改用本地 TODO）
- ~~Notion 数据同步~~（改用本地存储）
